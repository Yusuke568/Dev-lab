# 勤務報告書テンプレート化システム要件定義書
## 02. 機能要件定義書

### 2.1 機能一覧

#### 2.1.1 勤務報告書テンプレート化機能群

| 機能ID | 機能名 | 概要 | 優先度 |
|--------|--------|------|--------|
| F001 | 時間外・有給休暇更新機能 | 時間外勤務、有給休暇の申請・更新処理 | 高 |
| F002 | SE所感コメント入力機能 | 通常勤務時のコメント専用入力 | 高 |
| F003 | 自動時間調整機能 | 配属先別休憩時間による自動時間調整 | 高 |
| F004 | 複数日一括入力機能 | 複数日の勤務データまとめて入力 | 中 |
| F005 | 時間外申請書統合機能 | 時間外申請書と勤務報告書の統合画面 | 高 |
| F006 | 整合性自動チェック機能 | 入力データの自動整合性検証 | 高 |

#### 2.1.2 スマホ入力機能群

| 機能ID | 機能名 | 概要 | 優先度 |
|--------|--------|------|--------|
| F011 | アラート・通知機能 | 提出忘れ防止のアラート機能 | 高 |
| F012 | ワンタッチ入力機能 | 出退勤時刻のボタン入力 | 高 |
| F013 | 自動通知・コメント機能 | 毎週水曜日の自動通知とコメント入力 | 中 |
| F014 | 上司送信機能 | 報告書の上司への直接送信 | 中 |

### 2.2 詳細機能仕様

#### F001: 時間外・有給休暇更新機能
**概要**: 時間外勤務申請と有給休暇申請の更新処理を行う

**機能詳細**:
- 時間外勤務申請の新規作成・更新・削除
- 有給休暇申請の新規作成・更新・削除
- 申請状況の確認・履歴表示
- 承認フローとの連携

**入力項目**:
- 申請日、申請種別、開始時刻、終了時刻
- 事由、申請理由
- 承認者情報

**処理フロー**:
1. 申請内容入力
2. 入力内容検証
3. データベース更新
4. 承認者への通知

---

#### F002: SE所感コメント入力機能
**概要**: 通常勤務時に限定したSE所感コメントの入力機能

**機能詳細**:
- 通常勤務日のみコメント入力可能
- 定型文テンプレート提供
- 文字数制限（500文字以内）

**入力項目**:
- 作業内容
- 進捗状況
- 課題・改善点
- その他所感

---

#### F003: 自動時間調整機能
**概要**: 配属先の休憩時間設定に基づく自動時間調整

**機能詳細**:
- 配属先マスタとの連携
- 休憩時間の自動控除
- 実働時間の自動計算
- 時間外労働時間の自動算出

**設定項目**:
- 配属先別休憩時間（開始時刻、終了時刻）
- 標準勤務時間設定
- 時間外労働閾値設定

**計算ロジック**:
```
実働時間 = 退勤時刻 - 出勤時刻 - 休憩時間
時間外労働時間 = MAX(0, 実働時間 - 標準勤務時間)
```

---

#### F004: 複数日一括入力機能
**概要**: 複数日の勤務データを一括で入力する機能

**機能詳細**:
- カレンダー形式での日付選択
- 複数日同時選択
- 一括入力項目の設定
- バルク更新処理

**一括入力項目**:
- 出勤時間
- 退勤時間
- 稼働調整時間
- 間接時間
- 摘要

**操作フロー**:
1. カレンダーから対象日選択（複数選択可）
2. 一括入力する項目の値設定
3. 確認画面表示
4. 一括更新実行

---

#### F005: 時間外申請書統合機能
**概要**: 時間外申請書と通常勤務報告書の入力画面統合

**機能詳細**:
- 単一画面での申請・報告書作成
- 申請種別に応じた項目表示切り替え
- リアルタイム入力補完
- 下書き保存機能

**統合画面構成**:
- 基本情報エリア（氏名、部署、日付）
- 勤務時間エリア（出退勤、休憩、実働時間）
- 申請事項エリア（時間外、有給等）
- コメント・所感エリア

---

#### F006: 整合性自動チェック機能
**概要**: 入力データの自動整合性検証

**チェック項目**:
- 時刻の前後関係（出勤 < 退勤）
- 勤務時間の妥当性（24時間以内）
- 休憩時間の重複チェック
- 時間外申請との整合性
- 有給申請日との重複チェック

**エラーメッセージ例**:
- 「退勤時刻が出勤時刻より前になっています」
- 「時間外申請時間と実績に差異があります」
- 「有給申請日に勤務実績が入力されています」

---

#### F011: アラート・通知機能
**概要**: 提出忘れ防止のためのアラート機能

**通知タイミング**:
- 毎日18:00に当日未入力チェック
- 月末最終日17:00に月次未提出チェック
- 毎週水曜日10:00にコメント入力促進

**通知方法**:
- プッシュ通知（対応端末のみ）
- システム内メッセージ
- メール通知（オプション）

---

#### F012: ワンタッチ入力機能
**概要**: 出退勤時刻のボタン一発入力

**機能詳細**:
- 現在時刻の自動入力
- 間接時間の簡易入力
- 入力済み判定とボタン無効化

**ボタン種類**:
- 出勤ボタン
- 退勤ボタン
- 休憩開始ボタン
- 休憩終了ボタン
- 間接時間開始/終了ボタン

---

#### F013: 自動通知・コメント機能
**概要**: 定期的な自動通知とモバイルコメント入力

**通知スケジュール**:
- 毎週水曜日 10:00 週次レビュー促進
- 毎月最終営業日 15:00 月次まとめ促進

**コメント入力支援**:
- 定型文テンプレート
- 音声入力対応
- 予測変換機能

---

#### F014: 上司送信機能
**概要**: 作業報告書等の上司への直接送信機能

**送信対象書類**:
- 日次作業報告書
- 個人別時間外勤務申請書
- 月次勤務実績サマリー

**送信機能**:
- 組織図連携による上司自動判定
- 承認依頼メッセージ添付
- 送信履歴管理
- リマインダー機能

### 2.3 画面遷移図

```
[ログイン画面]
    ↓
[メインメニュー]
    ├── [勤務入力画面] (F001-F006)
    ├── [履歴確認画面]
    ├── [設定画面]
    └── [報告書送信画面] (F014)

[モバイル専用メニュー]
    ├── [ワンタッチ入力] (F012)
    ├── [コメント入力] (F013)
    └── [通知設定] (F011)
```

### 2.4 外部システム連携

#### 既存勤怠システム連携
- STAFF_TABLE（社員マスタ）からの情報取得
- CLASS_MASTER（役職マスタ）との連携
- 既存勤怠データとの整合性確保

#### 通知システム連携
- メールサーバーとの連携（SMTP）
- プッシュ通知サービス連携

---
*文書作成日: 2025年9月14日*  
*文書バージョン: 1.0*