# 勤務報告書テンプレート化システム要件定義書
## 04. 画面設計書

### 4.1 デザインコンセプト
**勤務報告書テンプレート化システム** - 既存システム拡張型

既存のkintai.jsp（テーブル形式カレンダー）を基盤として、機能要件定義書に沿った実用的な改善を実施します。
- **基盤**: 現行システムのテーブルレイアウトを継承・強化
- **テーマ**: 業務効率化重視のモダンUI
- **カラーテーマ**: 既存の#f3f6fb背景 + 現代的アクセント
- **改善方針**: 段階的アップグレード（破綻のないUI/UX向上）

### 4.2 画面一覧

| 画面ID | 画面名 | 概要 | 対応機能ID | デバイス対応 |
|--------|--------|------|----------|-------------|
| SC001 | 勤怠入力画面（メイン）| 月間カレンダー形式勤怠入力 | F001-F006 | PC/Mobile |
| SC002 | 複数日一括入力画面 | 複数日選択・一括設定 | F004 | PC |
| SC003 | 時間外申請書画面 | 時間外勤務申請専用 | F001,F005 | PC/Mobile |
| SC004 | 設定画面 | 配属先・通知設定 | F003,F011 | PC/Mobile |
| SC005 | 履歴確認画面 | 過去データ閲覧・修正 | 全般 | PC/Mobile |
| SC006 | 承認管理画面 | 管理者用承認処理 | F014 | PC |
| SC007 | モバイル簡易入力画面 | スマホ最適化入力 | F012,F013 | Mobile |

### 4.3 詳細画面設計

#### SC001: 勤怠入力画面（メイン）
**概要**: 既存kintai.jspを拡張した月間カレンダー形式の勤怠入力画面

**機能要件対応**:
- F001: 時間外・有給休暇更新機能
- F002: SE所感コメント入力機能  
- F003: 自動時間調整機能
- F005: 時間外申請書統合機能
- F006: 整合性自動チェック機能

**PC版レイアウト（既存kintai.jsp拡張版）**:
```
┌─────────────────────────────────────────────────────────────────┐
│ 勤怠管理システム - 2025年9月                         田中太郎   │
├─────────────────────────────────────────────────────────────────┤
│ ■ 勤務状況サマリー                                             │
│ 今月出勤: 18日 | 総勤務: 144.5h | 時間外: 12.5h | 有給残: 15日   │
├─────────────────────────────────────────────────────────────────┤
│ ■ ワンタッチ操作                                               │
│ [🕘 出勤] [🕗 退勤] [☕ 休憩開始] [☕ 休憩終了] [📝 一括入力]   │
│ 時間外労働累計: 12時間30分 / 45時間 (上限)                      │
├─────────────────────────────────────────────────────────────────┤
│ ■ 月間カレンダー（既存テーブル形式拡張）                         │
│ ┌───┬───┬────┬────┬────┬────┬─────────┐               │
│ │日付 │曜日│出勤  │退勤  │勤務区分│実働時間│SE所感/備考    │               │
│ ├───┼───┼────┼────┼────┼────┼─────────┤               │
│ │9/1  │月  │09:00 │18:00 │通常勤務│8.0h   │[コメント入力] │               │
│ │9/2  │火  │09:15 │18:30 │通常勤務│8.25h  │[コメント入力] │               │
│ │9/3  │水  │09:00 │20:00 │時間外  │10.0h  │[時間外申請]   │               │
│ │9/4  │木  │--:-- │--:-- │有給休暇│--    │[休暇申請]     │               │
│ │... │... │...   │...   │...     │...    │...           │               │
│ └───┴───┴────┴────┴────┴────┴─────────┘               │
├─────────────────────────────────────────────────────────────────┤
│ ■ 入力支援・チェック機能                                       │
│ ✅ 整合性チェック: 問題なし | ⚠️ 注意: 9/15 8h超過予定         │
│ 💡 自動時間調整: 休憩時間12:00-13:00自動控除済み                │
│ 📋 テンプレート: [定型コメント▼] [よく使う時間▼]               │
├─────────────────────────────────────────────────────────────────┤
│ [💾 一時保存] [📤 月次提出] [📊 履歴表示] [⚙️ 設定]            │
└─────────────────────────────────────────────────────────────────┘
```

**主要機能**:
1. **既存機能の強化**:
   - テーブル行クリックでインライン編集
   - リアルタイム時間計算・検証
   - 勤務区分変更時の自動フォーム切り替え

2. **新規追加機能**:
   - ワンタッチ出退勤ボタン（F012相当）
   - SE所感コメント入力欄（F002）
   - 時間外申請統合フォーム（F005）
   - 整合性チェック結果表示（F006）

3. **モバイル対応**:
   - レスポンシブテーブル（横スクロール対応）
   - タッチフレンドリーなボタンサイズ
   - 簡易入力モード切り替え

---

#### SC002: 複数日一括入力画面
**概要**: F004対応 - 複数日選択による効率的な一括入力

**機能要件**:
- カレンダー形式での日付選択（複数選択可能）
- 一括設定項目の統一入力
- 個別調整機能

**PC版レイアウト**:
```
┌─────────────────────────────────────────────────────────────────┐
│ 複数日一括入力 - 勤怠管理システム                    [戻る]      │
├─────────────────────────────────────────────────────────────────┤
│ ■ 対象期間・日付選択                                           │
│ 期間: [2025/09/01] ～ [2025/09/30]  [今月] [先月] [来月]      │
│                                                               │
│ ■ カレンダー選択 (複数選択可能)                                │
│   2025年9月                           選択済み: 5日間          │
│ ┌──┬──┬──┬──┬──┬──┬──┐                             │
│ │日 │月 │火 │水 │木 │金 │土 │                             │
│ ├──┼──┼──┼──┼──┼──┼──┤                             │
│ │1  │2  │3  │4  │5☑ │6☑ │7  │  ☑: 選択済み               │
│ │8  │9☑ │10☑│11☑│12 │13 │14 │  🔵: 既入力済み             │
│ │15 │16 │17 │18 │19 │20 │21 │                             │
│ └──┴──┴──┴──┴──┴──┴──┘                             │
├─────────────────────────────────────────────────────────────────┤
│ ■ 一括設定内容                                                │
│ 出勤時刻: [09:00] □全選択日に適用   退勤時刻: [18:00] □全選択日  │
│ 勤務区分: [通常勤務 ▼] □全選択日    休憩時間: [12:00-13:00] 自動 │  
│ SE所感:   [定型文選択 ▼]  □全選択日に適用                      │
│ ┌─────────────────────────────────────────────────────┐       │
│ │プロジェクトA開発作業。設計書レビューと実装を実施。        │       │
│ └─────────────────────────────────────────────────────┘       │
├─────────────────────────────────────────────────────────────────┤
│ ■ 個別調整 (選択日のみ表示)                                    │
│ 9/5(火): 出勤[09:00] 退勤[18:00] [通常勤務] ✓適用済み          │
│ 9/6(水): 出勤[09:00] 退勤[20:00] [時間外▼] [個別設定]          │
│ 9/9(土): 出勤[--:--] 退勤[--:--] [有給休暇▼] [個別設定]        │
│ ...                                                           │
├─────────────────────────────────────────────────────────────────┤
│ [👁️ プレビュー確認] [🔄 クリア] [💾 一時保存] [📤 一括登録]     │
└─────────────────────────────────────────────────────────────────┘
```

---

#### SC003: 時間外申請書画面
**概要**: F001,F005対応 - 時間外勤務申請専用画面（既存統合）

**機能要件**:
- 事前申請・事後申請の区別
- 勤務実績との整合性チェック
- 承認ワークフロー連携

**PC版レイアウト**:
```
┌─────────────────────────────────────────────────────────────────┐
│ 時間外勤務申請書 - 勤怠管理システム                   [戻る]      │  
├─────────────────────────────────────────────────────────────────┤
│ ■ 申請者情報                                                   │
│ 氏名: 田中太郎    部署: 開発部    承認者: 佐藤部長              │
│ 申請日: 2025/09/14    申請種別: ●事前申請 ○事後申請             │
├─────────────────────────────────────────────────────────────────┤
│ ■ 時間外勤務予定                                              │  
│ 対象日: [2025/09/15] [カレンダー選択]                          │
│ 予定開始: [18:00] 予定終了: [20:00]  予定時間外: 2時間0分       │
│ 実績開始: [18:15] 実績終了: [19:45]  実績時間外: 1時間30分      │
│ 💡 実績との差異: -30分 (予定より短縮)                           │
├─────────────────────────────────────────────────────────────────┤
│ ■ 申請理由・作業内容                                           │
│ [定型理由 ▼] システム障害対応、緊急リリース対応...              │
│ ┌─────────────────────────────────────────────────────┐       │
│ │システム障害により緊急対応が必要となったため。               │       │
│ │顧客への影響を最小限にするため、当日中の修正完了が必要。     │       │
│ │作業内容: バグ修正、テスト実施、リリース作業。              │       │
│ └─────────────────────────────────────────────────────┘       │
├─────────────────────────────────────────────────────────────────┤
│ ■ 承認状況・コメント                                           │
│ 申請状況: 承認待ち → 承認者: 佐藤部長                          │
│ 承認コメント: [承認者記入欄]                                   │
├─────────────────────────────────────────────────────────────────┤
│ ■ 関連データ確認                                              │
│ ✅ 勤務実績との整合性: OK                                      │
│ ✅ 月次時間外制限: 35.5h / 45h (78%, 余裕あり)                │
│ ⚠️ 連続時間外: 3日連続 (健康管理注意)                          │
├─────────────────────────────────────────────────────────────────┤
│ [📤 申請提出] [💾 一時保存] [📋 申請履歴] [🔄 クリア]           │
└─────────────────────────────────────────────────────────────────┘
```

---

#### SC007: モバイル簡易入力画面
**概要**: F012,F013対応 - スマートフォン最適化入力画面

**機能要件**:
- ワンタッチ出退勤入力（F012）
- 自動通知・コメント機能（F013）
- オフライン対応・位置情報連携

**モバイル版レイアウト**:
```
┌─────────────────────┐
│ 勤怠システム    🔔3 │
│ 田中太郎 (開発部)   │
├─────────────────────┤
│ 📅 2025/09/14 (木) │
│ 現在: 09:15         │
├─────────────────────┤
│ ⚡ ワンタッチ入力    │
│ ┌─────────────────┐ │
│ │  🕘 出勤登録    │ │
│ │    09:15        │ │
│ └─────────────────┘ │
│ ┌─────────────────┐ │
│ │  🕗 退勤登録    │ │
│ │   (未登録)      │ │
│ └─────────────────┘ │
├─────────────────────┤
│ ☕ 休憩・間接時間   │
│ [休憩開始][休憩終了] │
│ [間接開始][間接終了] │
├─────────────────────┤
│ 🎯 勤務区分選択     │
│ ●通常勤務 ○時間外  │
│ ○有給休暇 ○半休   │
├─────────────────────┤
│ 📝 SE所感コメント   │
│ [📋定型文]  │
│ ┌─────────────────┐ │
│ │本日の作業内容... │ │
│ │                │ │
│ └─────────────────┘ │
├─────────────────────┤
│ 📤 上司送信機能     │
│ [日報送信][申請送信] │
├─────────────────────┤
│ [💾保存][📊履歴][⚙️設定]│
├─────────────────────┤
│ 通知: 水曜コメント   │
│ 提出忘れ: 0件       │
└─────────────────────┘
```

**モバイル特化機能**:
- プッシュ通知・バイブレーション
- オフライン同期
- 定期通知（毎週水曜日）

---

### 4.4 技術実装・デザイン要件

#### 4.4.1 既存システム踏襲
- **CSS基盤**: kintai.jspのテーブルスタイルを継承・拡張
- **カラーパレット**: 既存の#f3f6fb背景 + モダンアクセント
- **レイアウト**: テーブル形式を基本とした段階的改善

#### 4.4.2 レスポンシブデザイン
| デバイス | 画面幅 | 対応方法 |
|---------|-------|---------|
| PC | 1024px~ | テーブル全表示 |
| タブレット | 768px~1023px | 横スクロール対応 |
| スマートフォン | ~767px | 専用UI (SC007) |

#### 4.4.3 主要改善点
- **機能統合**: 時間外申請とテーブル編集の統合
- **操作性向上**: ワンタッチ入力、一括処理機能
- **検証強化**: リアルタイム整合性チェック
- **モバイル最適化**: 専用UI・プッシュ通知

### 4.5 画面遷移図

```
[既存ログイン] 
     ↓ 
[SC001: 勤怠入力メイン（月間テーブル）] 
     ├─→ [SC002: 複数日一括入力]
     ├─→ [SC003: 時間外申請書]
     ├─→ [SC004: 設定画面]
     ├─→ [SC005: 履歴確認]
     └─→ [SC006: 承認管理] (管理者)

[モバイル] 
     ├─→ [SC007: モバイル簡易入力]
     └─→ [SC001: PC版（レスポンシブ）]
```

### 4.6 開発アプローチ

#### 4.6.1 Phase 1: 既存システム拡張
1. kintai.jsp機能強化（テーブル編集、計算機能）
2. ワンタッチ入力ボタン追加
3. 整合性チェック機能

#### 4.6.2 Phase 2: 新規画面開発
1. 複数日一括入力画面
2. 時間外申請書専用画面
3. モバイル簡易入力画面

#### 4.6.3 Phase 3: 高度機能・最適化
1. プッシュ通知・自動通知
2. 上司送信機能・承認管理
3. レポート・統計機能

### 4.7 データベース連携

- **TIMECARD_RECORD**: メイン勤務記録
- **OVERTIME_REQUEST**: 時間外申請データ  
- **VACATION_REQUEST**: 休暇申請データ
- **STAFF_WORKPLACE**: 配属先・休憩時間設定
- **TEMPLATE_MASTER**: コメント定型文
- **NOTIFICATION_LOG**: 通知履歴

---
*文書作成日: 2025年9月14日*  
*文書バージョン: 1.0*